function isNotEmpty(t){var e=t.value;return e!=null&&e.length!=0||(alert("Those fields won't fill themselves!"),!1)}function isWeightage(t){var e=t.value;if(e==null||e.length==0)return alert("Please fill in the required fields"),!1;if(parseFloat(e)>=1||parseFloat(e)<=0)alert("Please fill in a valid weightage between 0 and 1.");else return!0}function validForm(e){if(isNotEmpty(e.sname)&&isNotEmpty(e.smarks)&&isNotEmpty(e.smax)){if(parseInt(e.smarks.value)>parseInt(e.smax.value))return alert("You've done splendidly well you've broken the calculator!\nYou didn't get higher than the max mark!"),!1;if(isWeightage(e.sweightage))return!0}return!1}var subjectList=[];function addSubject(e,t,n,s){const o=document.querySelector("#js-form");if(e===''||e===null)return;if(t===''||t===null)return;if(n===''||n===null)return;if(s===''||s===null)return;if(parseInt(o.smarks.value)>parseInt(o.smax.value))return;if(subjectList.find(t=>t.sname==e))return alert("Subjet already exists."),!1;const i={sname:e,smarks:t,smax:n,sweightage:s};return subjectList.push(i),renderSubject(i),!0}function deleteSubject(e){const n=subjectList.findIndex(t=>t.sname===e),t={deleted:!0,sname:e};subjectList=subjectList.filter(t=>t.sname!==e),renderSubject(t)}function calculate(){var e=0,t=0,n=0,s=[],o=[],i=[],a=[],r=[];for(let d=0;d<subjectList.length;d++){const c=subjectList[d],u=parseFloat(c.smarks),h=parseFloat(c.smax),m=parseFloat(c.sweightage);h!=100?e+=u/h*100*m:e+=u*m,t+=u,n+=h;const l=parseFloat(c.smarks)/parseFloat(c.smax);l>=.9?s.push(c):l>=.8?o.push(c):l>=.7?i.push(c):l>=.6?a.push(c):r.push(c)}return[e,t,n,s,o,i,a,r]}function renderSubject(e){const n=document.querySelector("#subjectsTable"),s=document.querySelector(`[data-key='${e.sname}']`);if(e.deleted){s.remove(),subjectList.length==0&&(n.style.visibility="collapse");return}const t=document.createElement("tr");t.setAttribute("class","subjectItem"),t.setAttribute("data-key",e.sname),t.innerHTML=`
<td>${e.sname}</td>
<td>${e.smarks}</td>
<td>${e.smax}</td>
<td>${e.sweightage}</td>
<td><button class="delete-subject">X</button></td>
`,s?n.replaceChild(t,s):n.append(t),n.style.visibility="visible"}const table=document.querySelector("#subjectsTable");table.addEventListener("click",e=>{if(e.target.classList.contains("delete-subject")){const t=e.target.parentElement.parentElement.dataset.key;deleteSubject(t)}}),window.addEventListener("load",()=>{document.querySelector("#sname").focus();const e=document.querySelector("#js-form");e.addEventListener("submit",o=>{o.preventDefault();const e=document.querySelector("#sname"),t=document.querySelector("#smarks"),n=document.querySelector("#smax"),s=document.querySelector("#sweightage");addSubject(e.value.trim(),t.value.trim(),n.value.trim(),s.value.trim())&&(e.value='',t.value='',n.value='',s.value='',e.focus())})});function calculateBtn(){if(subjectList.length<=1){alert("You must have done more than one subject this semister!");return}results=calculate();var t=document.querySelector("#resultsViewer");t&&(t.innerHTML='');const e=document.createElement("h3");results[0]>=90?e.innerHTML=`Oops! You got small Eid!`:results[0]>=80?e.innerHTML=`Good Job! You got medium Eid!`:results[0]>=70?e.innerHTML=`Amazing! You got Eid!`:results[0]>=60?e.innerHTML=`EID! You got BIG Eid!`:e.innerHTML=`That's not funny anymore, you literally failed.`,e.innerHTML+=` <br/>Your overall is ${results[0].toFixed(1).toString()}/100`;const n=document.createElement("dl"),o=document.createElement("dt");o.innerHTML=`Your overall mark is ${results[1]} from ${results[2]}`,n.append(o);const i=["Subjects that you got small eid in:","Subjects that you got medium eid in:","Subjects that you got eid in:","Subjects that you got big eid in:","Subjects that you failed in:"];for(let e=3;e<=7;e++){const t=document.createElement("dl"),s=document.createElement("dt");s.innerHTML=i[e-3],results[e].length&&t.append(s);for(let s=0;s<results[e].length;s++){const n=results[e][s],o=document.createElement("dd");o.innerHTML=`${n.sname}, ${n.smarks}/${n.smax}, ${n.smarks/n.smax*100}%`,t.append(o)}n.append(t)}const s=document.createElement("button");s.setAttribute("onclick",`window.location.reload()`),s.innerHTML="Reset App",t.append(e),t.append(n),t.append(s),t.style.visibility="visible"}